{% extends 'base.html' %}

{% block content %}

{% for message in get_flashed_messages() %}
<div class="alert alert-primary" role="alert">
    {{ message}}
</div>
{% endfor %}

{% if name %}

<table class="table table-striped table-ordered table-striped">
    <h1>Hello {{ name }} !!</h1>
    {% for our_user in our_users %}
    <tr>
        <td>
            {{our_user.id}} - <a href="{{url_for('update', id=our_user.id)}}">{{our_user.name}} </a> -
            {{our_user.email}} - {{our_user.color}} - {% if our_user.isGay %} ✔ {% else %} ❌ {% endif%}
        </td>
    </tr>
    {% endfor %}
</table>

{% else %}
<h1>update user </h1>
<br>
<div class="shadow p-3 mb-5 bg-body-tertiary rounded">
    <form action="/update/{{name_to_update.id}}" method="POST">
        {{ form.csrf_token}}
        {{ form.name.label(class='form-label')}}
        {{ form.name(class='form-control', value=name_to_update.name)}}

        {{ form.email.label(class='form-label')}}
        {{ form.email(class='form-control', value=name_to_update.email)}}

        {{ form.color.label(class='form-label')}}
        {{ form.color(class='form-control', value=name_to_update.color)}}
        
        {{ form.isGay.label(class='form-check-label')}}
        {{ form.isGay(class='form-check-input')}}
        <br>
        {{form.submit(class='btn btn-secondary')}}

    </form>
</div>
<br><br><br>


{% endif %}

{% endblock content %}